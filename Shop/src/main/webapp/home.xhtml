<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:b="http://bootsfaces.net/ui" xmlns:p="http://primefaces.org/ui">

<h:head>
	<title><ui:insert name="title">Kundenverwaltung</ui:insert></title>
	<link rel="stylesheet" href="resources/CSS/general.css" type="text/css" />
	<link rel="shortcut icon" href="resources/IMAGES/finallogo1.png" />
</h:head>

<h:body>
	<f:event listener="#{loginHandler.checkLoggedIn}" type="preRenderView" />
	<b:form>
		<b:navBar id="top" brand="BELISO SHOP"
			brandImg="resources/IMAGES/finallogo1.png"
			brand-img-style="width:40px;
				height:30px" fluid="true"
			sticky="true">
			<b:navbarLinks pull="right">

				<b:navCommandLink  iconAwesome="group" value="#{msg.Kontakt}" href="#" />
				<b:navCommandLink  iconAwesome="info" value="#{msg.Impressum}" href="#" />
				<b:navCommandLink  iconAwesome="leaf" value="#{msg.UeberUns}" href="#" />
				<b:dropMenu iconAwesome="globe" value="#{msg.Sprache}">
					<b:navCommandLink value="DE" action="#{loginHandler.deutschLang()}"
						immediate="true">
						<b:image value="resources/IMAGES/de.png" width="20" height="20" />
					</b:navCommandLink>
					<b:navCommandLink value="EN"
						action="#{loginHandler.englischLang()}" immediate="true">
						<b:image value="resources/IMAGES/en.png" width="20" height="20" />
					</b:navCommandLink>
					<b:navCommandLink value="FR" action="#{loginHandler.frenchLang()}"
						immediate="true">
						<b:image value="resources/IMAGES/fr.jpg" width="20" height="20" />
					</b:navCommandLink>
				</b:dropMenu>

				<b:dropMenu iconAwesome="user-circle"
					value="#{loginHandler.user.benutzername}">

					<b:navCommandLink iconAwesome="pencil"
						value="#{msg.ProfilBearbeiten}"
						action="#{loginHandler.loggedKundeBearbeiten}" />
					<b:navCommandLink iconAwesome="sign-out"
						action="#{loginHandler.logout}" value="#{msg.Abmelden}">
						<f:actionListener binding="#{shop.updateArtikelList(null)}"/>
  						<f:actionListener binding="#{artikelHandler.updateArtikelnList(null)}"/>
  					</b:navCommandLink>
					<b:navCommandLink></b:navCommandLink>
					<b:navCommandLink iconAwesome="shopping-cart"
						value="#{msg.Warenkorb}" action="#{loginHandler.goToShopCard()}" />
				</b:dropMenu>
			</b:navbarLinks>
		</b:navBar>

		<b:container styleClass="content-container">
			<p:growl placementFrom="top" show-detail="true" global-only="false"
				show-summary="true" allow-dismiss="true"
				animation-enter="animated bounceInDown"
				animation-exit="animated flipOutX" escape="true" />
			<b:jumbotron style="widht:100%;">
				<ui:insert>
					<h3>#{msg.jumbotron_welcome}</h3>
					<p>#{msg.jumbotron_welcometext2}</p>
				</ui:insert>
			</b:jumbotron>


			<p:dataGrid var="ca" value="#{shop.artikelList}"
				columns="3" rows="8" paginator="true"
				style="width:100%; background-color: #2E64FE; margin-top: 50px;"
				emptyMessage="#{msg.keineAufzeichnungen}"
				currentPageReportTemplate="{startRecord}-{endRecord} #{msg.von} {totalRecords} #{msg.Aufzeichnung}"
				paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				rowsPerPageTemplate="8,12,16">

				<b:panel style="text-align:center">
					<b:panelGrid columns="1" style="width:100%;">

						<p:graphicImage style="width:200px;height:100px;"
							value="/resources/IMAGES/ARTIKEL/#{ca.image}" />

						<h:outputText value="#{msg.Name} :		#{ca.name}" />
						<h:outputText value="#{msg.preis} :		#{ca.preis} €" />
						<br style="margin-top: 10px" />
						<p:commandButton value="#{msg.Infosanzeigen}" update="@none"
							process="@this" icon="pi pi-search"
							oncomplete="PF('infoDialog').show()">
							<f:setPropertyActionListener value="#{ca}"
								target="#{artikelHandler.merkeArtikel}" />
						</p:commandButton>

					</b:panelGrid>
				</b:panel>
			</p:dataGrid>

			<p:panelGrid id="warenkorbPanel" columns="5" layout="grid"
				style="width:100%; background-color: white; margin-top: 50px;"
				styleClass="showcase-text-align-center">
				<h:outputLabel for="size" value="#{msg.ArtikelanzahlImWarenkorb} :" />
				<h:outputText id="size"
					value="#{loginHandler.totalArtikelInsWarenkorb}" />

				<h:outputLabel for="totalPreis" value="#{msg.TotalPreis} :" />
				<h:outputText id="totalPreis"
					value="#{loginHandler.totalPreisInsWarenkorb} €" />
			</p:panelGrid>

			<p:dialog widgetVar="infoDialog"
				header="#{msg.header_dialog_artikel_info}" modal="true"
				resizable="false" showEffect="clip" hideEffect="explode">

				<p:autoUpdate />
				<p:outputPanel style="text-align:center;">
					<p:graphicImage
						value="/resources/IMAGES/ARTIKEL/#{artikelHandler.merkeArtikel.image}"
						width="250" />
					<h:panelGrid columns="2" cellpadding="5">
						<h:outputLabel for="Name" value="#{msg.Name} :" />
						<h:outputText id="Name"
							value="#{artikelHandler.merkeArtikel.name}" />

						<h:outputLabel for="Preis" value="#{msg.preis} :" />
						<h:outputText id="Preis"
							value="#{artikelHandler.merkeArtikel.preis} €" />

						<h:outputLabel for="beschreibungartikel"
							value="#{msg.Beschreibung} :" />
						<h:outputText id="beschreibungartikel"
							value="#{artikelHandler.merkeArtikel.beschreibung}" />

						<h:outputLabel for="anzahl" value="#{msg.Verfuegbar} :" />
						<h:outputText id="anzahl"
							value="#{artikelHandler.merkeArtikel.anzahl}" />

						<h:outputLabel for="spinner" value="#{msg.Anzahl} : " />
						<p:outputPanel>
							<p:spinner id="spinner" stepFactor="1"
								value="#{artikelHandler.merkeArtikel.kaufAnzahl}" />
						</p:outputPanel>
						<h:outputLabel />
						<h:outputLabel />
						<p:commandButton value="#{msg.Warenkorbhinzufuegen}"
							update="@form" icon="pi pi-warenkorb"
							action="#{loginHandler.addToCardShop()}">
							<f:setPropertyActionListener
								value="#{artikelHandler.merkeArtikel}"
								target="#{loginHandler.merkeArtikel}" />
						</p:commandButton>

					</h:panelGrid>
				</p:outputPanel>
			</p:dialog>

		</b:container>

		<div id="footer">
			<span>© Copyright 2019 BELISSO SHOP | Ben Inza Coulibaly | JSF
				WEB-APPLICATION </span>
		</div>

	</b:form>
</h:body>

</html>